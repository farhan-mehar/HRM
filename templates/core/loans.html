{% extends 'core/base.html' %}
{% block page_title %}Loans & Advances{% endblock %}
{% block content %}
<div class="card mt-4">
  <div class="card-body">
    <h4 class="card-title">Loans</h4>
    <form method="post" class="mb-3">
      {% csrf_token %}
      <div class="row g-2">
        <div class="col-md-3">{{ form.employee }}</div>
        <div class="col-md-2">{{ form.principal_amount }}</div>
        <div class="col-md-2">{{ form.monthly_installment }}</div>
        <div class="col-md-2">{{ form.balance }}</div>
        <div class="col-md-2">{{ form.start_date }}</div>
        <div class="col-md-1"><button class="btn btn-primary w-100">Add</button></div>
      </div>
      <div class="row mt-2">
        <div class="col-md-2">{{ form.end_date }}</div>
        <div class="col-md-2">{{ form.is_active }} <label class="form-check-label">Active</label></div>
      </div>
    </form>
    <table class="table table-bordered">
      <thead><tr><th>Employee</th><th>Principal</th><th>Installment</th><th>Balance</th><th>Start</th><th>End</th><th>Status</th></tr></thead>
      <tbody>
        {% for loan in loans %}
        <tr>
          <td>{{ loan.employee }}</td>
          <td>{{ loan.principal_amount }}</td>
          <td>{{ loan.monthly_installment }}</td>
          <td>{{ loan.balance }}</td>
          <td>{{ loan.start_date }}</td>
          <td>{{ loan.end_date }}</td>
          <td>{{ loan.is_active|yesno:"Active,Closed" }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="7">No loans.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  </div>
{% endblock %}


